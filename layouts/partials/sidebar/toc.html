{{- $enable := and (default true .Params.toc) (default true .Site.Params.toc) -}}
{{- $wordCount := default 280 .Site.Params.tocWordCount -}}
{{- $toc := .TableOfContents -}}
{{- $valid := and $toc (and (ne $toc "<nav id=\"TableOfContents\"></nav>") (gt .WordCount $wordCount)) -}}
{{- if and $enable $valid -}}
<section class="post-toc row surface">
  <h4>{{ i18n "table_of_contents" }}</h4>
  <nav>
    {{- $toc -}}
  </nav>
</section>
{{- end -}}
